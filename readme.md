Извлечение данных из текстов законов о бюджете Санкт-Петербурга
===============================================================

Результаты находятся [здесь](http://antonkhorev.github.io/BudgetSpb/).

Зачем?
------

Законы о бюджете публикуются в виде pdf-файлов, основную часть которых составляют таблицы с данными, занимающие сотни страниц.
Есть ещё вариант — весь текст закона из системы «Кодекс» на одной очень большой странице html или в одном doc-файле.
Таблицы оттуда для удобства работы с ними можно было бы извлечь, что данная программа и делает.
На данный момент обрабатывается *Ведомственная структура расходов*, которая обычно находится в приложениях 3 и 4 к закону.

Как?
----

1. [Скачать](http://pdfbox.apache.org/downloads.html) `pdfbox-app-1.8.1.jar`, положить в каталог `bin`.
2. Установить библиотеку `xlwt3`.
   Так как `xlwt` под python 3 не портирована, нужен `xlwt3`.
   Но `xlwt3` не поддерживается и не заработает под python 3.3, поэтому нужен её [форк](https://bitbucket.org/luensdorf/xlwt3).
3. Скачать zip-файлы со страницы [«Законы о бюджете»](http://www.fincom.spb.ru/comfin/budjet/laws.htm) сайта Комитета финансов.
   Нужен файл, где весь закон с приложениями — он называется обычно «Скачать Закон с приложениями», «Текст проекта Закона с приложениями» или «Скачать все».
   Положить файл нужно в подкаталог каталога `zip`, соответствующий ссылке.
   Например, файл `http://www.fincom.spb.ru/files/cf/npd/budget/2013/full/bd2013-15.zip` должен находиться в каталоге `zip/2013/full`.
4. Запустить `src/main.py`, который создаст csv и xls с таблицами и `index.html` со ссылками на созданные файлы.
5. *(Далее — только для публикации в интернете)*
   Закачать каталоги `csv` и `xls` на хостинг файлов (проверено на *dropbox*).
6. Средствами хостинга сделать их общедоступными.
7. Сохранить html-страницы с ссылками на файлы в каталог `htm`.
8. Запустить `src/linker.py`, который сделает новый `index.html` со ссылками на файлы на хостинге.
9. Закачать `index.html` на веб-хостинг (проверено на *github pages*, на *dropbox* не сработает).
